<!DOCTYPE html>
<html>
<head>
  <title>RoboSat Leaflet WebUI</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
        integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
	crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
	  integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
	  crossorigin=""></script>
</head>
<body>
  <div id="mapid" style="width:100%; height:100vh;"></div>
  <script>
function load_json(url, callback) {
  if (url == '' ) return; var x = new XMLHttpRequest(); x.overrideMimeType("application/json"); x.open('GET', url, true);
  x.onreadystatechange = function(){ if (x.readyState == 4 && x.status == "200") callback(JSON.parse(x.responseText)) };
  x.send(null);
};
var m = L.map("mapid").setView({{center}}, {{zoom}});
L.tileLayer("{{base_url}}/{z}/{x}/{y}.{{ext}}").addTo(m);
var grid_style = {style: {"color": "#cc0099", "opacity": 0.3, "fillOpacity": 0}}
load_json("{{tiles}}", function(grid){ L.geoJSON(grid, grid_style).addTo(m); });
  </script>
</body>
</html>
